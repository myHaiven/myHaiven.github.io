(this["webpackJsonpcitizen-science"]=this["webpackJsonpcitizen-science"]||[]).push([[0],{179:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(42),i=n.n(r),s=(n(99),n(261)),c=n(51),l=n(16),u=n(10),d=n(274),h=n(263),b=n(275),p=n(265),f=n(260),j=n(122),m=n(120),x=n.n(m),g=n(267),O=n(249),y=n(251),v=n(255),w=n(259),k=n(258),C=n(257),S=n(1);function I(e){var t=e.imageUrl,n=e.imageAlt,a=e.header,o=e.body,r=e.onClick;return Object(S.jsx)(v.a,{sx:{maxWidth:345,minWidth:300,minHeight:200,margin:1},style:{backgroundColor:"#C2E0FF"},children:Object(S.jsxs)(C.a,{sx:{height:"100%"},onClick:r,children:[t&&Object(S.jsx)(k.a,{component:"img",height:"140",image:t,alt:n}),Object(S.jsxs)(w.a,{children:[Object(S.jsx)(f.a,{gutterBottom:!0,variant:"h5",component:"div",align:"justify",children:a}),Object(S.jsx)(f.a,{variant:"body2",color:"text.secondary",align:"justify",children:o})]})]})})}var D=n.p+"static/media/logo.0a813fae.png",E=function(){return Object(S.jsx)(s.a,{children:Object(S.jsxs)(y.a,{container:!0,direction:"row",alignItems:"stretch",spacing:0,children:[Object(S.jsx)(y.a,{item:!0,xs:12,md:3,children:Object(S.jsx)(y.a,{style:{height:"100%"},children:Object(S.jsx)("img",{src:D,alt:"Haiven Logo",style:{maxWidth:"90%",maxHeight:"90%"}})})}),Object(S.jsx)(y.a,{item:!0,xs:12,md:9,children:Object(S.jsxs)(y.a,{container:!0,spacing:{xs:2,md:5},children:[Object(S.jsx)(y.a,{item:!0,xs:12,children:Object(S.jsx)(f.a,{variant:"h2",sx:{fontWeight:"bold",color:"#7DBCFF",fontFamily:"'Quicksand', 'sans-serif'"},children:"Haiven"})}),Object(S.jsxs)(y.a,{item:!0,xs:12,children:[Object(S.jsx)(f.a,{variant:"h5",sx:{marginBottom:1},children:"Welcome to Haiven's data collection site"}),Object(S.jsxs)(f.a,{align:"justify",children:["Haiven is a non profit organization working to empower and improve the safety of those living with intimate partner violence. If you want to know more about our organization please read"," ",Object(S.jsx)(c.b,{to:"/ourPurpose",style:{textDecoration:"none"},children:"Our Purpose"}),". We thank you very much for your support and hope that you will consider donating your voice today!"]})]})]})})]})})};var T=n(250),F=n(253),A=n(15),B=n(17),N=n.n(B),P=n(30),R=n(256),W=function(){return Object(S.jsxs)(s.a,{children:[Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Some information before you begin"}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:1},children:"First off please be aware that you will be yelling periodically for approximately 30 minutes. Please inform those around you so as not to alert, or cause distress to your neighbours and avoid any possible punitive actions."}),Object(S.jsxs)(f.a,{children:["Items to prepare:",Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"Pants or jacket with pockets"}),Object(S.jsx)("li",{children:"Purse/backpack/bag"}),Object(S.jsx)("li",{children:"Something soft, e.g. pillow, blanket, sweater"})]})]}),Object(S.jsxs)(f.a,{children:["Understanding the voice levels",Object(S.jsxs)("ol",{children:[Object(S.jsx)("li",{children:"Speaking : this is a relaxed talking voice up to \u201craised voice\u201d"}),Object(S.jsx)("li",{children:"Shouting : this is raised voice until your voice breaks"}),Object(S.jsx)("li",{children:"Screaming : this is the highest level where you feel the breaking in your voice as you go into a scream"})]})]}),Object(S.jsxs)(f.a,{children:["You will be completing 19 recordings with three of each voice level. For each recording you will be given a random phrase and emotion as well as a position for your phone. Hold or place the phone in the provided position and do as follows:",Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:'say "a" and speak the phrase'}),Object(S.jsx)("li",{children:'say "b" and shout the phrase'}),Object(S.jsx)("li",{children:'say "c" and scream the phrase'})]}),'When you have finished, click "submit" and move on to the next recording']}),Object(S.jsx)(f.a,{children:"This page uses cookies. If you cannot complete all of the recordings at once you may start where you left off, given your cookies and cache have not been cleared."})]})},U=function(){return Object(S.jsxs)(s.a,{children:[Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",color:"primary.dark",marginBottom:3},children:"Thank you very much for submitting your voice!"}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:1},children:"Take a screenshot of this page and email hello.haiven@gmail.com to receive a participation certificate!"}),Object(S.jsxs)(f.a,{variant:"body1",sx:{marginBottom:1},children:["Click ",Object(S.jsxs)(c.b,{to:"/",style:{color:"#7DBCFF"},children:[Object(S.jsx)("span",{"aria-hidden":"true"}),"here"]})," to return to the main page or exit to close"]})]})},H=n(22),M=n(3),L=n(262),_=n(235),G=n(264),q=n(247),z=n(243),Y=n(189),V=n(248),Q=n(244),X=function(e){var t=e.answerKey,n=e.options,a=e.questionType,o=e.question,r=e.getCurVal,i=e.handleChange,s=e.keysToClear;switch(a){case"radio":return Object(S.jsxs)(L.a,{sx:{marginBottom:2},component:"fieldset",children:[Object(S.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(S.jsx)(_.a,{sx:{display:"inline-flex"},onChange:function(e){return i(t,e.target.value,s)},value:r(t),name:"radio-buttons-group",children:n.map((function(e){return Object(S.jsx)(h.a,{sx:{marginBottom:1},children:Object(S.jsx)(G.a,{value:e,control:Object(S.jsx)(q.a,{}),label:e},e)},e)}))})]});case"text":return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:2},children:o}),Object(S.jsx)(z.a,{autoFocus:!0,label:"Type an answer",sx:{width:"25ch"},value:r(t)||"",onChange:function(e){return i(t,e.target.value,s)},inputProps:{autoComplete:"off"}})]});case"skipCheckbox":return Object(S.jsxs)(L.a,{sx:{marginBottom:2},children:[o&&Object(S.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(S.jsx)(Y.a,{sx:{display:"inline-flex"},children:n.map((function(e){return Object(S.jsx)(h.a,{children:Object(S.jsx)(G.a,{value:e,label:e,control:Object(S.jsx)(V.a,{checked:e===r(t),onChange:function(n){return i(t,r(t)===e?null:e,s)}})},e)},e)}))})]});case"searchSelect":return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{sx:{fontWeight:"bold",marginBottom:1},children:o}),Object(S.jsx)(Q.a,{disablePortal:!0,value:r(t)||null,id:"combo-box-demo",options:n,sx:{maxWidth:300,marginBottom:2},getOptionLabel:function(e){return e},renderOption:function(e,t){return Object(S.jsx)(h.a,Object(H.a)(Object(H.a)({component:"li"},e),{},{children:t}))},isOptionEqualToValue:function(e,t){return e===t||"Prefer not to disclose"===t},onChange:function(e,n){return i(t,n,s)},renderInput:function(e){return Object(S.jsx)(z.a,Object(H.a)(Object(H.a)({},e),{},{label:"Select the answer",inputProps:Object(H.a)(Object(H.a)({},e.inputProps),{},{autoComplete:"off"})}))}})]});default:return Object(S.jsx)(S.Fragment,{})}},J=function(e){var t=e.question,n=e.answers,o=e.setAnswer,r=e.triggerAlert,i=Object(l.f)(),c=Object(a.useCallback)((function(){i.push(ze.ACTIVITIES)}),[i]);return Object(S.jsx)(s.a,{sx:{display:"flex",flexDirection:"column"},children:Object(S.jsx)(X,{handleChange:function(e,a,i){(null===t||void 0===t?void 0:t.requireAlert)&&t.requireAlert.condition===a&&r(t.requireAlert.message,t.requireAlert.title,c,"Go Home");var s=Object(M.a)({},e,a);i&&i.forEach((function(e){s[e]=null})),o(Object(H.a)(Object(H.a)({},n),s))},getCurVal:function(e){return n[e]},question:t.question,answerKey:t.key,options:t.options,questionType:t.type,keysToClear:null===t||void 0===t?void 0:t.clearIfChange},t.key)})},K=function(e){var t=e.phonePosition,n=e.script,a=e.affect,o=function(){return Object(S.jsx)(s.a,{sx:{paddingX:0},children:Object(S.jsx)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:t})})},r=function(){return Object(S.jsx)(s.a,{sx:{paddingX:0},children:Object(S.jsxs)(f.a,{variant:"h5",sx:{color:"primary.dark",margin:2,fontSize:{xs:18,sm:18,md:24}},fontWeight:"fontWeightBold",children:["Please use this emotion: ",a]})})},i=function(){return Object(S.jsxs)(s.a,{sx:{paddingX:0},children:[Object(S.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:['Speak: "a, ',n,'"']}),Object(S.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{fontSize:{xs:18,sm:18,md:24}},children:['Shout: "b, ',n,'"']}),Object(S.jsxs)(f.a,{variant:"h5",fontWeight:"fontWeightBold",sx:{marginBottom:4,fontSize:{xs:18,sm:18,md:24}},children:['Scream: "c, ',n,'"']}),Object(S.jsx)(f.a,{variant:"h5",sx:{fontSize:{xs:18,sm:18,md:24}},children:"You may listen to your audio and record as many times as you like, do not worry about any background noises, we want those! Click next to submit."})]})};return Object(S.jsxs)(s.a,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",marginBottom:3,paddingX:0},children:[Object(S.jsx)(o,{}),Object(S.jsx)(r,{}),Object(S.jsx)(i,{})]})},Z=n(80),$=n.n(Z),ee={type:"audio",mimeType:"audio/wav",recorderType:Z.StereoAudioRecorder,disableLogs:!0,timeSlice:1e3,ondataavailable:function(e){},checkForInactiveTracks:!1,onTimeStamp:function(e){},bitsPerSecond:128e3,audioBitsPerSecond:128e3,videoBitsPerSecond:128e3,frameInterval:90,previewStream:function(e){},bufferSize:16384,numberOfAudioChannels:1,frameRate:30,bitrate:128e3,elementClass:"multi-streams-mixer"};function te(e){return Object(S.jsx)("div",{className:"timer",style:{display:"flex",alignItems:"center"},children:Object(S.jsx)(f.a,{variant:"h4",className:"digits",children:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=Math.floor(e-3600*t-60*n),o=n<10?"0"+n.toString():n.toString(),r=a<10?"0"+a.toString():a.toString();return t<=0?o+":"+r:"".concat(t,":").concat(o,":").concat(r)}(e.time)})})}var ne=n(118),ae=n.n(ne),oe=n(117),re=n.n(oe),ie=n(266),se="You have a limit of 1.5 minute to record the audio. Please give it another try if you were not able to finish. If you did, click next!",ce=function(){return Object(S.jsx)(ie.a,{title:"Click to stop recording!",arrow:!0,children:Object(S.jsx)(re.a,{style:{color:"white",background:"#F16D6D",padding:10,borderRadius:"50%"}})})},le=function(e){return Object(S.jsx)(ie.a,{title:e.message,arrow:!0,children:Object(S.jsx)(ae.a,{style:{color:"white",background:"#7DBCff",padding:10,borderRadius:"50%"}})})};function ue(e){var t=e.setRecordingBlob,n=e.displayMessageAlert,o=Object(a.useState)(null),r=Object(u.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(),d=Object(u.a)(l,2),h=d[0],b=d[1],p=Object(a.useState)(""),f=Object(u.a)(p,2),j=f[0],m=f[1],x=Object(a.useState)(0),O=Object(u.a)(x,2),y=O[0],v=O[1],w=Object(a.useState)(!1),k=Object(u.a)(w,2),C=k[0],I=k[1],D=Object(a.useState)(!0),E=Object(u.a)(D,2),T=E[0],F=E[1],A=Object(a.useState)(!1),B=Object(u.a)(A,2),R=B[0],W=B[1],U=Object(a.useState)(null),H=Object(u.a)(U,2),M=H[0],L=H[1];Object(a.useEffect)((function(){var e=null;return C&&!T&&M?e=setInterval((function(){v(((new Date).getTime()-M)/1e3)}),100):clearInterval(e),function(){clearInterval(e)}}),[C,T,M]);var _=function(){I(!0),F(!1),L((new Date).getTime()),v(0)},G=function(){var e=Object(P.a)(N.a.mark((function e(n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return m(n.toURL()),e.next=5,n.getBlob();case 5:a=e.sent,t(a),W(!0),I(!1),i.getTracks()&&i.getTracks().forEach((function(e){return e.stop()})),c(null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(){return z.apply(this,arguments)}function z(){return(z=Object(P.a)(N.a.mark((function e(){var t,a,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:!0,video:!1},e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:a=e.sent,c(a),o=new $.a(a,ee),_(),9e4,o.setRecordingDuration(9e4,(function(){n(se),o.stopRecording((function(){G(o)}))})),o.startRecording(),b(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0 instanceof DOMException&&("NotFoundError"===e.t0.name||"DevicesNotFoundError"===e.t0.name?n("No microphone was found","You cannot record without a mic. We reccomend you plug in some headphones and try again"):"NotReadableError"===e.t0.name||"TrackStartError"===e.t0.name?n("Your microphone are already in use","You cannot record if your microphone is being used on another website or app. Please close that app and try again"):"OverconstrainedError"===e.t0.name||"ConstraintNotSatisfiedError"===e.t0.name||"NotAllowedError"===e.t0.name||"PermissionDeniedError"===e.t0.name?n("Please allow permission to use microphone","You cannot record the phrase without allowing permission to use the microphone."):n("Something went wrong and you cannot use your microphone","You'll have to refresh the page and try again"));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var Y=function(){var e=Object(P.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}if(h){e.next=3;break}return e.abrupt("return");case 3:h.stopRecording((function(){G(h)})),e.next=9;break;case 6:return e.next=8,q();case 8:W(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(s.a,{sx:{display:"flex",justifyContent:"center",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[Object(S.jsx)(g.a,{onClick:function(){return Y()},children:i?Object(S.jsx)(ce,{}):Object(S.jsx)(le,{message:j?"Click to retry recording again":"Click to record"})}),R&&Object(S.jsx)("audio",{style:{width:"100%",maxWidth:300},src:j,controls:!0}),i&&Object(S.jsx)(te,{time:y})]})}var de,he="under 18",be=[{question:"What is your age?",options:[he,"18-24","25-39","40-60","60 and over"],type:"radio",key:"age",requireAlert:{condition:he,title:"Unfortunately, you cannot participate if you're under 18",message:"Our website will have features in the future for you to learn more about our discoveries. Check back later!"}},{question:"What is your gender?",options:["Man","Woman","Non-Binary","Other","Prefer not to disclose"],type:"radio",key:"gender"},{question:"What is the the first language you learned?",key:"firstLanguage",options:[""],type:"text"},{question:"What language do you currently use most often?",key:"currentLanguage",options:[""],type:"text"},{question:"What model of phone are you using?",key:"phoneModel",options:[""],type:"text"}],pe=[{title:"Task Details",body:"You are invited to take part in our collection of shout and scream data. We will be collecting some demographic data to help us understand your voice. Participants will read from a script while moving their phone to various positions around their home. This data will be used in projects to help us detect screams and shouts from cell phone recordings and improve the lives of those living with domestic violence."},{title:"Voluntary Participation and Right to Withdraw",body:"Your participation is entirely voluntary. You may end your participation at any point without penalty by stopping your recording and not returning it to the researchers. However, once you have submitted your data it will not be possible to withdraw from the study as the data is stored without collection of your name or contact information."},{title:"Procedures",body:"Upon agreeing to this consent form, follow the steps provided by hitting 'next'. Be aware of any disturbances you may contribute to your surroundings. Please begin by filling out the pre-study questionnaire. Next, following the study instructions you will be recording yourself speaking, shouting and screaming several phrases with your phone in different positions around your home. The collection should take approximately 30 minutes."},{title:"Data Retention",body:"Data provided will be stored in a database for the use of future researchers. The data will be stored in Haiven's Amazon Web Services (AWS) S3 bucket on Canadian servers. and be free to use for research purposes. Commercial use of the data will be require a paid license, and explicit approval by the board and the use cases must not violate Haiven's mission, vision or core values. You are able to consent to having your data only used for research purposes, or for both research and non Haiven commercial purposes."},{title:"Risks/Discomforts",body:'We do not think there is anything in this study that could harm you. It should be noted that this study will involve the need to repeatedly yell random phrases such as "banana and mustard sandwiches", if you are concerned that this may cause your neighbours distress or result in punitive action please make them aware and check your surroundings before participating in the study.'},{title:"Benefits",body:"Although it may not directly benefit you, this study will benefit society by providing data for researchers understanding screams and the emotions they convey. Future use cases include scream and shout detection in applications monitoring violence."},{title:"Compensation",body:"There is no compensation for completing this experiment."},{title:"Confidentiality",body:"In this study, we will collect your age group, sex, gender, first language learned and current primary language. However, no directly identifying data (e.g. name, e-mail address) will be stored along with your responses. We note that your voice will be used, and this could potentially be identifiable. Voice recordings will only be accessible by research personnel and license holders and will be securely stored in our AWS S3 bucket. All email correspondence will be permanently deleted once the conversation has concluded."},{title:"Inclusion and Exclusion Criteria",body:"We set inclusion criteria as those 18 years of age or older and have access to a mobile phone with recording capabilities. Participants should have a sufficient level of English comprehension to understand the consent obligations and follow the written study instructions. Exclusion criteria includes anyone that is: under the age of 18 years old or does not have access to a mobile phone able to record or is unable to read and understand the consent form and study instructions."},{title:"Contact Information",body:"If you have any questions about this study, you may contact hello.haiven@gmail.com."},{title:"Concerns or Complaints",body:"By selecting one or more of the options below, you are indicating that you have read the consent form, you are age 18 or older, and that you voluntarily agree to participate in this online research study. If you are interested in the results of the study, please check the Haiven website for progress in our offerings and publications."}],fe=function(e){var t=e.hasUserConsentResearch,n=e.setHasUserConsentResearch,a=e.hasUserConsentCommercial,o=e.setHasUserConsentCommercial,r=e.setAnswer;return Object(S.jsxs)(s.a,{children:[Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Shouting Data Collection"}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"We are collecting emotional shout data to help us better detect this behaviour in order to improve the safety of those living with intimate partner violence."}),Object(S.jsx)(f.a,{sx:{marginBottom:3},children:Object(S.jsx)("b",{children:"Before participating in this study please read the following information."})}),pe.map((function(e,t){return Object(S.jsxs)(s.a,{children:[Object(S.jsx)(f.a,{variant:"h5",sx:{fontWeight:"bold",marginBottom:1},children:e.title},"title-".concat(t)),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:3},children:e.body},"body-".concat(t))]},t)})),Object(S.jsx)(s.a,{children:Object(S.jsx)(G.a,{control:Object(S.jsx)(V.a,{onChange:function(e){r((function(t){return Object(H.a)(Object(H.a)({},t),{},{consentresearch:e.target.checked})})),n(e.target.checked)},checked:t}),label:"I have read and accept the consent form and would like to include my data for Research Purposes"})}),Object(S.jsxs)(s.a,{children:[Object(S.jsx)(G.a,{control:Object(S.jsx)(V.a,{onChange:function(e){r((function(t){return Object(H.a)(Object(H.a)({},t),{},{consentcommercial:e.target.checked})})),o(e.target.checked)},checked:a}),label:"I have read and accept the consent form and would like to include my data for Non Haiven Commercial Purposes"}),!t&&!a&&Object(S.jsx)(f.a,{variant:"body2",sx:{fontWeight:"bold",marginBottom:1,color:"red"},children:"You will have to accept at least one option and read the consent form to participate."})]})]})},je=function(e){return Object(H.a)({},e)},me=n(271),xe=n(268),ge=n(273),Oe=n(270),ye=n(272),ve=n(269);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED",e[e.LOADING=2]="LOADING",e[e.INFORM=3]="INFORM"}(de||(de={}));var we=function(e){var t=e.open,n=e.setOpen,o=e.handleAgreeSubmit,r=e.alertMode,i=e.handleClose,s=r===de.LOADING,c=r===de.INFORM,l=Object(a.useState)(!1),d=Object(u.a)(l,2),h=d[0],b=d[1];return Object(S.jsxs)(xe.a,{open:t,onClose:function(){r!==de.LOADING&&n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsxs)(ve.a,{id:"alert-dialog-title",children:[" ",function(){switch(r){case de.SUCCESS:return"Audio has been successfully submitted!";case de.FAILED:return"Audio has been failed to submit!";case de.INFORM:return"Are you sure you want to submit this audio?";case de.LOADING:return"Hold on, we are submitting your audio.";default:return""}}()," "]}),Object(S.jsx)(Oe.a,{sx:{display:"flex",justifyContent:"center"},children:s?Object(S.jsx)(me.a,{}):Object(S.jsxs)(ye.a,{children:[" ",function(){switch(r){case de.SUCCESS:return"";case de.FAILED:return"Something went wrong. Give it another try. Click off this box to close.";case de.INFORM:return"You will not be able to go back to the previous questions if you click yes. We have to process your audio in order to retrieve your results.";default:return""}}()," "]})}),Object(S.jsxs)(ge.a,{sx:{padding:2},children:[c&&Object(S.jsx)(g.a,{sx:{color:"neutral.dark",marginRight:1},onClick:function(){return n(!1)},children:"Cancel"}),!s&&Object(S.jsx)(g.a,{variant:"contained",onClick:function(){return function(){switch(r){case de.SUCCESS:return i();case de.FAILED:return o(b);case de.INFORM:return b(!0),o(b);default:return}}()},autoFocus:!0,disabled:h,children:function(){switch(r){case de.SUCCESS:return"Close";case de.FAILED:return"Try Again";case de.INFORM:return"Submit";default:return""}}()})]})]})},ke=n(119),Ce=n.n(ke),Se=function(e){var t=e.open,n=e.setOpen,a=e.message,o=e.title,r=e.cta,i=e.buttonTitle;return Object(S.jsxs)(xe.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsxs)(ve.a,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[o&&Object(S.jsx)(s.a,{sx:{textAlign:"center"},children:Object(S.jsx)(f.a,{sx:{fontWeight:"bold"},children:o})}),Object(S.jsx)(p.a,{onClick:function(){return n(!1)},children:Object(S.jsx)(Ce.a,{})})]}),Object(S.jsx)(Oe.a,{children:a}),Object(S.jsx)(ge.a,{sx:{padding:2,justifyContent:"center"},children:r&&i&&Object(S.jsx)(g.a,{variant:"contained",onClick:r,children:i})})]})},Ie=n(57),De=n.n(Ie);function Ee(e,t){return Te.apply(this,arguments)}function Te(){return(Te=Object(P.a)(N.a.mark((function e(t,n){var a,o,r,i,s,c,l,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://9ml78r5eaj.execute-api.ca-central-1.amazonaws.com/dev/haiven-shout-data-collect-GetPresignedUrlAndStoreM-vGxHgxBaP0LD",a=T.a(),o="shout_data_".concat(a),"audio/wav",n.audioID=o,e.prev=5,e.next=8,De.a.post("https://9ml78r5eaj.execute-api.ca-central-1.amazonaws.com/dev/haiven-shout-data-collect-GetPresignedUrlAndStoreM-vGxHgxBaP0LD",{fileName:o,fileType:"audio/wav",metaData:n});case 8:for(u in r=e.sent,i=r.data,s=i.fields,c={headers:{"Content-Type":"multipart/form-data"}},l=new FormData,s)l.append(u,s[u]);return l.append("file",t,o),e.next=17,De.a.post(i.url,l,c);case 17:return e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(5),new Error("Audio Failed to update: ".concat(e.t0));case 23:case"end":return e.stop()}}),e,null,[[5,20]])})))).apply(this,arguments)}function Fe(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(P.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(URL){e.next=2;break}throw new Error("No USER DATA ENDPOINT");case 2:return e.prev=2,e.next=5,De.a.post("https://a7uhkhvmh3.execute-api.ca-central-1.amazonaws.com/default/haiven-shout-data-collect-WriteUserDataToDynamoFun-bENtV8zxlg0V",t,{headers:{"content-type":"application/json"}});case 5:if(200===(n=e.sent).status){e.next=8;break}throw new Error(n.statusText);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("Failed to upload User Data: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Be(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(P.a)(N.a.mark((function e(t){var n,a,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="http://localhost:3000"){e.next=3;break}throw new Error("No POLL RESULTS DATA ENDPOINT");case 3:return e.prev=3,e.next=6,De.a.get(n,{params:{audioID:t}});case 6:if(200===(a=e.sent).status){e.next=9;break}throw new Error(a.statusText);case 9:e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(3),!De.a.isAxiosError(e.t0)){e.next=16;break}if(404!==(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)){e.next=16;break}return e.abrupt("return",null);case 16:throw new Error("Failed to upload User Data: ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var Pe,Re;(Re=Pe||(Pe={}))[Re.CONSENT_PAGE=0]="CONSENT_PAGE",Re[Re.QUESTION_START=1]="QUESTION_START",Re[Re.QUESTION_END=be.length]="QUESTION_END",Re[Re.INFO_PAGE=be.length+1]="INFO_PAGE",Re[Re.FIRST_RECORDING=Re.INFO_PAGE+1]="FIRST_RECORDING";var We=n(254),Ue={1:"banana and mustard sandwiches",2:"wolf ring lights are fantastic",3:"hungry action hippos fruit",4:"another dog secretary show",5:"snow meteor down the chimney",6:"birds make new jingles",7:"heavy undersea birthday pumpkins",8:"fluffy baseboard yogurt division",9:"zebra cats walking on lamps",10:"five special guest treasures",11:"ripped ocean jumper",12:"five dollar slaw onion cure",13:"the thunder break craze",14:"join the Ear Look club"},He={1:"neutral",2:"anger",3:"joy",4:"fear",5:"disgust",6:"surprise",7:"sadness"},Me=["Hold your phone next to your face with the mic facing your mouth as you would in a phone conversation 1/19","Hold your phone next to your face but with the mic/phone facing away from your face 2/19","Hold your phone next to your face with your hand covering the mic 3/19","Hold your phone next to your hip with the back of phone on your palm 4/19","Hold your phone next to your hip with your hand covering the mic 5/19","Place your phone in your pocket 6/19","Place your phone in a bag and hold it next to your hip 7/19","Place phone 1-2 meters away face up on any surface 8/19","Place phone 1-2 meters away face down on a hard surface 9/19","Place phone 1-2 meters away face down on a soft surface 10/19","Place phone 1-2 meters away in a bag 11/19","Place phone on the opposite side of the room face up on any surface 12/19","Place phone on the opposite side of the room face down on a hard surface 13/19","Place phone on the opposite side of the room face down on a soft surface 14/19","Place phone on the opposite side of the room in a bag 15/19","Place phone as far away as possible while on on the opposite side of a wall from you face up on any surface 16/19","Place phone as far away as possible while on on the opposite side of a wall from you face down on a hard surface 17/19","Place phone as far away as possible while on on the opposite side of a wall from you face down on a soft surface 18/19","Place phone as far away as possible while on on the opposite side of a wall from you in a bag 19/19"];function Le(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}var _e=function(e){var t=Object(a.useState)(-1),n=Object(u.a)(t,2),o=n[0],r=n[1],i=e.canonicalUserID,c=e.setCanonicalUserID,l=Object(a.useState)(function(e){return{userID:e,age:null,gender:null,firstLanguage:null,currentLanguage:null,phoneModel:null,consentresearch:null,consentcommercial:null}}(i)),d=Object(u.a)(l,2),b=d[0],p=d[1],f=Object(We.a)(["step"]),j=Object(u.a)(f,3),m=j[0],x=j[1],O=j[2],y=Object(We.a)(["userID"]),v=Object(u.a)(y,3),w=v[0],k=v[1],C=v[2],I=Object(a.useState)(!1),D=Object(u.a)(I,2),E=D[0],T=D[1];Object(a.useEffect)((function(){void 0===w.userID&&void 0===m.step&&(T(!0),k("userID",i,{path:"/"}),x("step",0,{path:"/"}),r(0))}),[]);var F=Object(a.useState)(!1),B=Object(u.a)(F,2),H=B[0],M=B[1],L=Object(a.useState)(!1),_=Object(u.a)(L,2),G=_[0],q=_[1],z=Object(a.useState)({title:"",message:""}),Y=Object(u.a)(z,2),V=Y[0],Q=Y[1],X=Object(a.useState)(de.INFORM),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(),ne=Object(u.a)(te,2),ae=ne[0],oe=ne[1],re=Object(a.useState)(),ie=Object(u.a)(re,2),se=ie[0],ce=ie[1],le=Object(a.useState)(!1),he=Object(u.a)(le,2),pe=he[0],me=he[1],xe=Object(a.useState)(0),ge=Object(u.a)(xe,2),Oe=ge[0],ye=ge[1],ve=Object(a.useState)(!1),ke=Object(u.a)(ve,2),Ce=ke[0],Ie=ke[1],De=Object(a.useState)(!1),Te=Object(u.a)(De,2),Ae=Te[0],Ne=Te[1],Re=Object(a.useState)([]),_e=Object(u.a)(Re,2),Ge=_e[0],qe=_e[1],ze=Object(a.useCallback)((function(e){p(e)}),[]),Ye=function(e,t,n,a){Q({title:t||"",message:e,cta:n,buttonTitle:a}),q(!0)},Ve=function(){var e=Object(P.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$e){e.next=5;break}return M(!0),e.abrupt("return");case 5:if(o!==Pe.INFO_PAGE){e.next=9;break}return t=je(b),e.next=9,Fe(t);case 9:-1===o?(x("step",o+2,{path:"/"}),r(o+2)):o<Ze?(x("step",o+1,{path:"/"}),r(o+1)):o===Ze-1&&(x("step",Ke.length-1,{path:"/"}),r(Ke.length-1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=Object(a.useMemo)((function(){return Me.map((function(e,t){var n=Ue[Le(1,Object.keys(Ue).length)],a=He[Le(1,Object.keys(He).length)];return qe((function(t){return[].concat(Object(A.a)(t),[{phoneposition:e,affect:a,script:n}])})),Object(S.jsx)(K,{phonePosition:e,script:n,affect:a})}))}),[]),Xe=[Object(S.jsx)(fe,{hasUserConsentResearch:Ce,setHasUserConsentResearch:Ie,hasUserConsentCommercial:Ae,setHasUserConsentCommercial:Ne,setAnswer:p})].concat(Object(A.a)(be.map((function(e,t){return Object(S.jsx)(J,{triggerAlert:Ye,question:e,answers:b,setAnswer:ze},t)}))),[Object(S.jsx)(W,{})]),Je=[Object(S.jsx)(U,{})],Ke=[].concat(Object(A.a)(Xe),Object(A.a)(Qe),Je),Ze=Ke.length-1,$e=o===Pe.FIRST_RECORDING||o>Pe.FIRST_RECORDING&&o<Ze,et=function(){var e=Object(P.a)(N.a.mark((function e(t){var n,a,r,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae){e.next=3;break}return t(!1),e.abrupt("return");case 3:return e.prev=3,n=Ge[o-Xe.length],a=n.phoneposition,r=n.affect,s=n.script,e.next=7,Ee(ae,{userID:i,phoneposition:a,affect:r,script:s});case 7:c=e.sent,o===Pe.FIRST_RECORDING&&ce(c),ee(de.SUCCESS),oe(void 0),t(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),ee(de.FAILED),t(!1);case 19:t(!1);case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){$e&&!H&&ee(de.INFORM)}),[$e,H]);!function(e,t,n){var o=Object(a.useRef)();Object(a.useEffect)((function(){n&&(o.current=e)}),[e,n]),Object(a.useEffect)((function(){if(n&&null!==t){var e=setInterval((function(){o.current()}),t);return function(){clearInterval(e)}}}),[e,t,n])}(Object(P.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se){e.next=7;break}return e.next=3,Be(se);case 3:e.sent&&me(!1),Oe>=8&&me(!1),ye(Oe+1);case 7:case"end":return e.stop()}}),e)}))),1e4,pe),Object(a.useEffect)((function(){function e(){return(e=Object(P.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(t);case 2:return(n=e.sent)||me(!0),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}$e&&se&&function(t){e.apply(this,arguments)}(se)}),[se,$e]);var tt=-1!==o&&0!==o&&o<=Pe.FIRST_RECORDING,nt=-1!==o&&o!==Ze;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(R.a,{sx:{display:"flex",flex:1,flexDirection:"column",padding:3},children:[!E&&Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"Do you want to resume where you left off?"}),Object(S.jsx)(g.a,{onClick:function(){T(!0),parseInt(m.step,10)>=be.length+2?(r(parseInt(m.step,10)),c(w.userID)):(O("step"),C("userID"),r(0),k("userID",i,{path:"/"}))},children:"Yes"}),Object(S.jsx)(g.a,{onClick:function(){O("step"),C("userID"),r(0),k("userID",i,{path:"/"}),T(!0)},children:"No"})]}),Object(S.jsx)(s.a,{sx:{flex:1},children:Ke[o]}),Object(S.jsxs)(h.a,{sx:{justifyContent:"space-between",display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[tt&&Object(S.jsx)(g.a,{variant:"contained",style:{backgroundColor:"#7DBCFF"},sx:{order:{xs:1,sm:0},width:70,height:40,marginTop:{xs:4,sm:0}},onClick:function(){o>0&&r(o-1),x("step",o-1,{path:"/"})},children:"Back"}),function(){if(o>=Pe.FIRST_RECORDING&&o!==Ze)return Object(S.jsx)(ue,{setRecordingBlob:oe,displayMessageAlert:Ye},o)}(),nt&&Object(S.jsx)(g.a,{variant:"contained",style:{backgroundColor:"#7DBCFF"},onClick:Ve,disabled:!(o===Pe.CONSENT_PAGE?1:o<=Pe.QUESTION_END&&o>=Pe.QUESTION_START?function(e,t){if((null===t||void 0===t?void 0:t.requireAlert)&&t.requireAlert.condition===e[t.key])return!1;var n=null===t||void 0===t?void 0:t.followUpQuestions,a=!!e[t.key];if(!n)return a;var o=n.every((function(t){var n=!!e[t.key];return null===t.condition?n:!(e[t.condition.key]===t.condition.answer)||n}));return a&&o}(b,be[o-Pe.QUESTION_START]):!$e||ae),sx:{order:{xs:2,sm:2},width:70,height:40,marginTop:{xs:4,sm:0},marginLeft:{xs:"auto"}},children:"Next"})]}),Object(S.jsx)(we,{open:H,setOpen:M,handleAgreeSubmit:function(e){return et(e)},alertMode:$,handleClose:function(){M(!1),r(o+1),x("step",o+1,{path:"/"}),ee(de.INFORM)}}),Object(S.jsx)(Se,{open:G,setOpen:q,message:V.message,title:V.title,cta:null===V||void 0===V?void 0:V.cta,buttonTitle:null===V||void 0===V?void 0:V.buttonTitle})]})})},Ge=n(121),qe=Object(Ge.a)({palette:{primary:{light:"#7DBCFF",main:"#7DBCFF",dark:"#7DBCFF",contrastText:"#fff"},neutral:{light:"#7DBCFF",main:"#7DBCFF",dark:"#7DBCFF"}},components:{MuiFilledInput:{styleOverrides:{root:{backgroundColor:"#7DBCFF","&:hover":{backgroundColor:"#7DBCFF"},"&.Mui-focused":{backgroundColor:"#7DBCFF"}}}},MuiInputLabel:{styleOverrides:{root:{"&.Mui-focused":{color:"#7DBCFF"}}}}}}),ze={ACTIVITIES:"/",DONATE_SHOUTS:"/donateShouts",OUR_PURPOSE:"/ourPurpose"},Ye=[{path:ze.ACTIVITIES,component:function(){var e=Object(l.f)(),t=Object(a.useCallback)((function(t){e.push(t)}),[e]),n=[{header:"Donate your shouts",body:"Click here to help us improve safety of those living with intimate partner violence by helping us better understand shouted speech",onclick:function(){return t(ze.DONATE_SHOUTS)}}];return Object(S.jsxs)(s.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[Object(S.jsx)(E,{}),n.map((function(e,t){return Object(S.jsx)(I,{header:e.header,body:e.body,onClick:function(){e.onclick()}},t)}))]})}},{path:ze.DONATE_SHOUTS,component:function(){var e=Object(a.useState)("user_".concat(T.a())),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(S.jsx)(F.a,{theme:qe,children:Object(S.jsx)(_e,{canonicalUserID:n,setCanonicalUserID:o})})}},{path:ze.OUR_PURPOSE,component:function(){return Object(S.jsxs)(s.a,{children:[Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Haiven's Mission"}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"Our mission is to provide victims and survivors of abuse with software services to improve their safety, well-being and independence. Haiven is addressing not only the crisis of intimate partner violence but also the aftermath by supporting those living with and surviving domestic violence, supporting agency, empowerment and security by providing guided access to our network of partnerships."}),Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Haiven's Vision"}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:"Our vision is to be able to create accessible technology and services to help someone through the process of exiting an abusive relationship and ensure they have the economic power to leave and stay out of it."}),Object(S.jsx)(f.a,{variant:"h4",sx:{fontWeight:"bold",marginBottom:3},children:"Haiven's Core Values"}),Object(S.jsxs)(f.a,{variant:"body1",sx:{marginBottom:2},children:[Object(S.jsxs)(f.a,{sx:{marginBottom:2},children:[Object(S.jsx)("b",{children:"Privacy"}),": Our utmost priority for our users is to ensure their privacy and safety. We do so by consulting multiple partners including industry and research experts, and consulting legal requirements."]}),Object(S.jsxs)(f.a,{sx:{marginBottom:2},children:[Object(S.jsx)("b",{children:"Human-Centered"}),": The person always comes first. Whether that is our user, our partners, or our team, we put the needs of the person before the needs of our organization."]}),Object(S.jsxs)(f.a,{sx:{marginBottom:2},children:[Object(S.jsx)("b",{children:"Collaborative"}),": The best work happens when we work together. We believe in collaborating with as many people as we can, either through our volunteer and advisory team, or through our partnerships. We want to hear different perspectives, share different ideas, and work together to build products with meaning."]}),Object(S.jsxs)(f.a,{sx:{marginBottom:2},children:[Object(S.jsx)("b",{children:"Freedom of Choice"}),": We don\u2019t always know what\u2019s best for our users. Human lives are more complex than we could ever imagine or anticipate. Therefore, we are dedicated to giving our users the freedom to make their own decisions and choose what\u2019s best for them."]})]}),Object(S.jsx)(f.a,{variant:"body1",sx:{marginBottom:2},children:Object(S.jsx)(f.a,{sx:{marginBottom:2},children:"Our full website is coming soon! If you would like to contact us please email: hello.haiven(at)gmail(dot)com"})})]})}}],Ve=[{name:"Data Collection",route:ze.ACTIVITIES},{name:"Our Purpose",route:ze.OUR_PURPOSE}],Qe=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(l.f)(),i=Object(a.useCallback)((function(e){o(null),r.push(e)}),[r]),c=Object(a.useCallback)((function(){return r.push(ze.ACTIVITIES)}),[r]);return Object(S.jsx)(d.a,{position:"static",sx:{backgroundColor:"#7DBCFF"},children:Object(S.jsx)(s.a,{maxWidth:"xl",children:Object(S.jsxs)(b.a,{disableGutters:!0,children:[Object(S.jsx)(f.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}}}),Object(S.jsxs)(h.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(S.jsx)(p.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(S.jsx)(x.a,{})}),Object(S.jsx)(j.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:function(){o(null)},sx:{display:{xs:"block",md:"none"}},children:Ve.map((function(e){var t=e.name,n=e.route;return Object(S.jsx)(O.a,{onClick:function(){return i(n)},children:Object(S.jsx)(f.a,{textAlign:"center",children:t})},t)}))})]}),Object(S.jsx)(f.a,{variant:"h6",noWrap:!0,component:"div",onClick:c,sx:{flexGrow:1,fontFamily:"'Quicksand', 'sans-serif'",cursor:"pointer"},children:"Haiven Shout Collection"}),Object(S.jsx)(h.a,{sx:{flexGrow:0,display:{xs:"none",md:"flex"}},children:Ve.map((function(e){var t=e.name,n=e.route;return Object(S.jsx)(g.a,{onClick:function(){i(n)},sx:{my:2,color:"white",display:"block"},children:t},t)}))})]})})})},Xe=function(){return Object(S.jsxs)(c.a,{children:[Object(S.jsx)(Qe,{}),Object(S.jsx)(s.a,{sx:{padding:{xs:2,md:5},minHeight:"85vh",width:"100vw",display:"flex",flexDirection:"column"},className:"App",children:Object(S.jsx)(l.c,{children:Ye.map((function(e){var t=e.path,n=e.component;return Object(S.jsx)(l.a,{exact:!0,path:t,component:n},t)}))})})]})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,276)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),r(e),i(e)}))},Ke=n(241);i.a.render(Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(Ke.a,{children:Object(S.jsx)(Xe,{})})}),document.getElementById("root")),Je()},99:function(e,t,n){}},[[179,1,2]]]);
//# sourceMappingURL=main.e376d8af.chunk.js.map